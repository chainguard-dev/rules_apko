<!-- Generated with Stardoc: http://skydoc.bazel.build -->

Public API re-exports

<a id="apko_image"></a>

## apko_image

<pre>
apko_image(<a href="#apko_image-name">name</a>, <a href="#apko_image-architecture">architecture</a>, <a href="#apko_image-args">args</a>, <a href="#apko_image-config">config</a>, <a href="#apko_image-contents">contents</a>, <a href="#apko_image-output">output</a>, <a href="#apko_image-tag">tag</a>)
</pre>

Build OCI images from APK packages directly without Dockerfile

This rule creates Alpine images using the 'apko.yaml' configuration file and relies on cache contents generated by [translate_lock](./translate_lock.md) to be fast.

```starlark
apko_image(
    name = "example",
    config = "apko.yaml",
    contents = "@example_lock//:contents",
    tag = "example:latest",
)
```

The label `@example_lock//:contents` is generated by the `translate_lock` extension, which consumes an 'apko.resolved.json' file. 
For more details, refer to the [documentation](./docs/apko-cache.md).

An example demonstrating usage with [rules_oci](https://github.com/bazel-contrib/rules_oci)

```starlark
apko_image(
    name = "alpine_base",
    config = "apko.yaml",
    contents = "@alpine_base_lock//:contents",
    tag = "alpine_base:latest",
)

oci_image(
    name = "app",
    base = ":alpine_base"
)
```

For more examples checkout the [examples](/examples) directory.


**ATTRIBUTES**


| Name  | Description | Type | Mandatory | Default |
| :------------- | :------------- | :------------- | :------------- | :------------- |
| <a id="apko_image-name"></a>name |  A unique name for this target.   | <a href="https://bazel.build/concepts/labels#target-names">Name</a> | required |  |
| <a id="apko_image-architecture"></a>architecture |  the CPU architecture which this image should be built to run on. See https://github.com/chainguard-dev/apko/blob/main/docs/apko_file.md#archs-top-level-element   | String | optional | <code>""</code> |
| <a id="apko_image-args"></a>args |  additional arguments to provide when running the <code>apko build</code> command.   | List of strings | optional | <code>[]</code> |
| <a id="apko_image-config"></a>config |  Label to the <code>apko.yaml</code> file.   | <a href="https://bazel.build/concepts/labels">Label</a> | required |  |
| <a id="apko_image-contents"></a>contents |  Label to the contents repository generated by translate_lock. See [apko-cache](./apko-cache.md) documentation.   | <a href="https://bazel.build/concepts/labels">Label</a> | required |  |
| <a id="apko_image-output"></a>output |  -   | String | optional | <code>"oci"</code> |
| <a id="apko_image-tag"></a>tag |  tag to apply to the resulting docker tarball. only applicable when <code>output</code> is <code>docker</code>   | String | required |  |


When standard conventions are obeyed (the config `.yaml` file and `.resolved.json.file` are in the same package as `apko_image`) there
is additional target generated named `.resolve`.
For the example above: `bazel run alpine_base.resolve` can be called to regenerate the `apko.resolved.json` file.

<a id="apko_bazelrc"></a>

## apko_bazelrc

<pre>
apko_bazelrc(<a href="#apko_bazelrc-name">name</a>, <a href="#apko_bazelrc-repositories">repositories</a>, <a href="#apko_bazelrc-kwargs">kwargs</a>)
</pre>

Helper macro for generating `.bazelrc` and `range.sh` files to allow for partial package fetches.

See [initial setup](./initial-setup.md) documentation for more information.


**PARAMETERS**


| Name  | Description | Default Value |
| :------------- | :------------- | :------------- |
| <a id="apko_bazelrc-name"></a>name |  name of the target   |  <code>"apko_bazelrc"</code> |
| <a id="apko_bazelrc-repositories"></a>repositories |  list of repositories to generate .bazelrc for   |  <code>["dl-cdn.alpinelinux.org", "packages.wolfi.dev"]</code> |
| <a id="apko_bazelrc-kwargs"></a>kwargs |  passed to expanding targets. only well known attributes such as <code>tags</code> <code>testonly</code> ought to be present.   |  none |



<!-- Generated with Stardoc: http://skydoc.bazel.build -->

Public API re-exports

<a id="apko_config"></a>

## apko_config

<pre>
apko_config(<a href="#apko_config-name">name</a>, <a href="#apko_config-config">config</a>, <a href="#apko_config-include">include</a>)
</pre>



**ATTRIBUTES**


| Name  | Description | Type | Mandatory | Default |
| :------------- | :------------- | :------------- | :------------- | :------------- |
| <a id="apko_config-name"></a>name |  A unique name for this target.   | <a href="https://bazel.build/concepts/labels#target-names">Name</a> | required |  |
| <a id="apko_config-config"></a>config |  Config of the image. Either in source directory or generated by Bazel.   | <a href="https://bazel.build/concepts/labels">Label</a> | optional | <code>None</code> |
| <a id="apko_config-include"></a>include |  Config that should be used as the [include](https://github.com/chainguard-dev/apko/blob/main/docs/apko_file.md#includes).         Note that if you want to use the include, the config itself should not contain it.   | <a href="https://bazel.build/concepts/labels">Label</a> | optional | <code>None</code> |


<a id="ApkoConfigInfo"></a>

## ApkoConfigInfo

<pre>
ApkoConfigInfo(<a href="#ApkoConfigInfo-files">files</a>)
</pre>

Information about apko config. May be used when generating apko config file instead of using hardcoded ones.

**FIELDS**


| Name  | Description |
| :------------- | :------------- |
| <a id="ApkoConfigInfo-files"></a>files |  depset of files that will be needed for building. All of them will be added to the execution of apko commands when built with Bazel.    |


<a id="apko_bazelrc"></a>

## apko_bazelrc

<pre>
apko_bazelrc(<a href="#apko_bazelrc-name">name</a>, <a href="#apko_bazelrc-repositories">repositories</a>, <a href="#apko_bazelrc-kwargs">kwargs</a>)
</pre>

Helper macro for generating `.bazelrc` and `range.sh` files to allow for partial package fetches.

See [initial setup](./initial-setup.md) documentation for more information.


**PARAMETERS**


| Name  | Description | Default Value |
| :------------- | :------------- | :------------- |
| <a id="apko_bazelrc-name"></a>name |  name of the target   |  <code>"apko_bazelrc"</code> |
| <a id="apko_bazelrc-repositories"></a>repositories |  list of repositories to generate .bazelrc for   |  <code>["dl-cdn.alpinelinux.org", "packages.wolfi.dev"]</code> |
| <a id="apko_bazelrc-kwargs"></a>kwargs |  passed to expanding targets. only well known attributes such as <code>tags</code> <code>testonly</code> ought to be present.   |  none |


<a id="apko_image"></a>

## apko_image

<pre>
apko_image(<a href="#apko_image-name">name</a>, <a href="#apko_image-contents">contents</a>, <a href="#apko_image-config">config</a>, <a href="#apko_image-tag">tag</a>, <a href="#apko_image-output">output</a>, <a href="#apko_image-architecture">architecture</a>, <a href="#apko_image-args">args</a>, <a href="#apko_image-kwargs">kwargs</a>)
</pre>

Build OCI images from APK packages directly without Dockerfile

This rule creates images using the 'apko.yaml' configuration file and relies on cache contents generated by [translate_lock](./translate_lock.md) to be fast.

```starlark
apko_image(
    name = "example",
    config = "apko.yaml",
    contents = "@example_lock//:contents",
    tag = "example:latest",
)
```

The label `@example_lock//:contents` is generated by the `translate_lock` extension, which consumes an 'apko.lock.json' file.
For more details, refer to the [documentation](./docs/apko-cache.md).

An example demonstrating usage with [rules_oci](https://github.com/bazel-contrib/rules_oci)

```starlark
apko_image(
    name = "alpine_base",
    config = "apko.yaml",
    contents = "@alpine_base_lock//:contents",
    tag = "alpine_base:latest",
)

oci_image(
    name = "app",
    base = ":alpine_base"
)
```

For more examples checkout the [examples](/examples) directory.


**PARAMETERS**


| Name  | Description | Default Value |
| :------------- | :------------- | :------------- |
| <a id="apko_image-name"></a>name |  of the target for the generated image.   |  none |
| <a id="apko_image-contents"></a>contents |  Label to the contents repository generated by translate_lock. See [apko-cache](./apko-cache.md) documentation.   |  none |
| <a id="apko_image-config"></a>config |  Label to the <code>apko.yaml</code> file.  For more advanced use-cases (multi-file configuration), use target providing <code>ApkoConfigInfo</code>.   |  none |
| <a id="apko_image-tag"></a>tag |  tag to apply to the resulting docker tarball. only applicable when <code>output</code> is <code>docker</code>   |  none |
| <a id="apko_image-output"></a>output |  "oci" of  "docker",   |  <code>"oci"</code> |
| <a id="apko_image-architecture"></a>architecture |  the CPU architecture which this image should be built to run on. See https://github.com/chainguard-dev/apko/blob/main/docs/apko_file.md#archs-top-level-element"),   |  <code>None</code> |
| <a id="apko_image-args"></a>args |  additional arguments to provide when running the <code>apko build</code> command.   |  <code>[]</code> |
| <a id="apko_image-kwargs"></a>kwargs |  other common arguments like: tags, visibility.   |  none |


<a id="apko_lock"></a>

## apko_lock

<pre>
apko_lock(<a href="#apko_lock-name">name</a>, <a href="#apko_lock-config">config</a>, <a href="#apko_lock-lockfile_name">lockfile_name</a>)
</pre>

Generates executable rule for producing apko lock files.

When run, the rule will output the lockfile to the lockfilename in the directory of the package where the rule is defined.
That is, if you define `apko_lock` in `foo/bar/BUILD.bazel` with `lockfile_name="baz.lock.json` the rule will output the lock into
`foo/bar/baz.lock.json`.


**PARAMETERS**


| Name  | Description | Default Value |
| :------------- | :------------- | :------------- |
| <a id="apko_lock-name"></a>name |  name of the rule,   |  none |
| <a id="apko_lock-config"></a>config |  label of the apko yaml config file (Either in source directory or generated by Bazel).   |  none |
| <a id="apko_lock-lockfile_name"></a>lockfile_name |  name of the lockfile   |  none |


